# 내용정리 

---

### GC 란?

- GC ( Garbage Collection ) 는 쓰레기를 정리하는 작업
  - Java 에서 쓰레기는 객체를 의미한다.
    - 하나의 객체는 메모리를 점유하고, 필요하지 않으면 메모리에서 해제되어야 한다.
    - 객체가 메모리를 점유하는 법
      ~~~
      String a = new String()
      ~~~

<br />

### 자바의 Runtime data area 는 어떻게 구성될까?

- PC 레지스터
- JVM 스택
- 힙 (Heap)
- 메서드 영역
- 런타임 상수(constant) 풀
- 네이티브 메서드 스택




### GC 의 영역

- GC 가 발생하는 부분이 힙 영역이다.
- 클래스 로더 시스템은 클래스나 인터페이스를 JVM 으로 로딩하는 기능을 수행
- 실행엔진은 로딩된 클래스의 메서드들에 포함되어 있는 모든 인스트럭션 정보를 실행한다.

<br />

### 자바 메모리의 영역의 구분

- 자바의 메모리 영역은 Heap 메모리와 Non-heap 메모리로 나뉜다.
  - Heap 메모리
    - 클래스 인스턴스, 배열이 이 메모리에 쌓인다.
    - 메모리는 공유 메모리라고도 불리우며 여러 스레드에서 공유하는 데이터들이 저장되는 메모리이다.
  - Non-heap 메모리
    - 자바의 내부 처리를 위해 필요한 영역
      - 메서드 영역 : 메서드 영역은 모든 JVM 스레드에서 공유한다.
        - 이 영역에 저장되는 데이터
          - 런타임 상수 풀 : contant_pool 이라는 정보가 포함
          - constant_pool 이라는 정보가 포함되어 있음
          - constant_pool 에 대한 정보를 실행 시에 참조하기 위한 영역
          - 필드정보는 메서드 데이터, 메서드와 생성자 코드가 있다.
      - JVM 스택 : 스레드가 시작할 때 JVM 스택이 생성된다.
        - 스택에는 메서드가 호출되는 정보인 프레임이 저장된다.
        - 지역변수와 임시결과, 메서드 수행과 리턴에 관련된 정보들도 포함된다.
      - 네이티브 메서드 스택 : 자바 코드가 아닌 다른 언어로된 코드들이 실행하게 될 때의 스택 정보를 관리한다.
      - PC 레지스터 : 자바의 스레드들은 각자의 pc 레지스터를 갖는다.
        - 네이티브한 코드를 제외한 모든 자바 코드들이 수행될 때 JVM의 인스트럭션 주소를 pc 레지스터에 보관한다.

  

### GC 의 원리
- 메모리 할당
- 사용 중인 메모리 인식
- 사용하지 않는 메모리 인식


<br />


- 사용하지 않는 메모리를 인식하는 작업을 수행하지 않으면, 할당한 메모리 영역이 꽉차서 JVM 에 행이 걸리거나, 더 많은 메모리를 할당하려는 현상이 발생할 것이다.
  - 행 : 서버가 요청을 처리 못하고 있는 상태를 의미한다.


- 만약 JVM 의 최대 메모리 크기를 지정해서 전부 사용한 다음, GC를 해도 더 이상 사용 가능한 메모리 영역이 없는데 계속 메모리를 할당하려고 하면 OutOfMemoryError 가 발생하여 JVM도 다운될 수 있다.

