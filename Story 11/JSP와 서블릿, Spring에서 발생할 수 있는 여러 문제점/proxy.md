# 내용정리
---

## 프록시란 ? 
프록시(Proxy)란 대리  란 의미로, 직접 통신할 수 없는 두 점 사이에서 통신을 할 경우 그 상이에 있어서 중계기로서 대리로 통신을 수행하는 기능을 의미한다.
프록시 서버는 클라이언트 입장에서는 원격 서버처럼 동작하고, 원격서버 입장에서는 클라이언트 처럼 동작한다. 
프록시 서버는 프록시 서버에 요청된 내용들을 캐시를 이용하여 저장해둡니다. 
캐시 안에 있는 정보를 요구하는 요청에 대해서는 원격 서버에 접속하여 데이터를 가져올 필요가 없게 됨으로써 전송시간을 절약할 수 있습니다.

## 프록시의 종류
프록시는 서버의 위치에 따라 크게 두 가지로 나눌 수 있습니다.

### Forward 프록시
프록시 서버를 클라이언트 호스트들과 접근하고자 하는 원격 리소스의 사이에 위치시킨 것을 의미합니다.
이 프록시 서버는 원격 서버로부터 요청된 리소스를 가져와서 요청한 사용자에게 돌려주는 역할을 수행하며, 캐시에 데이터가 남아 있다면 다음 요청 시 캐시된 데이터로부터 제공해줍니다.
이 서버는 전형적으로 로컬 디스크에 데이터를 저장하며, 클라이언트 호스트들은 사용중인 웹 브라우저를 이용하여 프록시 서버 사용 설정을 해야하므로 프록시 서버를 사용하고 있다는 것을 인식할 수 있다.
이 방식은 대역폭 사용을 감소시킬 수 있다는 것과 접근 정책 구현에 있어 다루기 쉬우면서도 비용이 저렴하다는 장점을 갖고 있습니다.
사용자의 정해진 사이트만 연결할 수 있는 등 웹 사용환경을 제한할 수 있으므로 기업 환경 등에서 많이 사용합니다.

<img width="747" alt="Screen Shot 2022-08-22 at 11 29 40 PM" src="https://user-images.githubusercontent.com/41246605/186295471-ef4d4739-cbd6-4bce-bac1-39d2cba5abcc.png">


### Reverse 프록시
프록시 서버를 인터넷 리소스 또는 인트라넷 리소스 앞에 위치시키는 방식이 Reverse 프록시 입니다. 이
방식은 클라이언트들이 프록시 서버에 연결된 것을 알지 못하며, 마치 최종 사용자가 요청 리소스에 직접 접근하는 것으로 느끼게 됩니다.
보통 기업의 네트워크 환경은 DMZ 로 구성되어 있으며, 이 구간에는 메일 서버, 웹 서버, FTP 서버 등 외부 서비스를 제공하는 서버가 위치하게 됩니다. 
만일 WAS 가 DMZ 환경에서 서비스를 진행하게 되면, WAS 는 DB 서버와 연결되므로 WAS 가 최전방에 있으면 WAS 가 털릴 경우 DB 서버까지 털릴 수 있습니다.
때문에 클라이언트와 연결되는 서버는 Reverse 프록시 서버이며, 이 서버가 WAS 와 통신하여 응답결과를 클라이언트에게 리턴해주기 때문에 보안 문제에서 안전할 수 있다.


<img width="821" alt="Screen Shot 2022-08-22 at 11 35 52 PM" src="https://user-images.githubusercontent.com/41246605/186295562-92e2bf81-e555-4e27-b6df-cded6b44cd3f.png">

그렇다면 Proxy 의 개념은 우리의 서비스에서 어떻게 적용되어 사용될까? 대표적인 예시로 스프링 프레임워크의 AOP 가 있다.

## Spring Proxy 기반 AOP
스프링을 통해 어플리케이션을 개발할 때, 우리는 애플리케이션의 비즈니스 로직도 신경써야 하지만, 트랜잭션 관리, 로깅, 캐싱 등의 기능도 제대로 동작하기 위해 신경을 써야한다.
그러나 공통적으로 사용되는 중요한 기능들을 매번 애플리케이션에서 구현할 때마다 관심을 두기 어렵기 때문에 스프링에서는 AOP 를 통해서 이런 공통적인 기능들을 별도로 분리해 
필요한 곳에서 재사용 가능하게 하였다.
이러한 스프링의 AOP 프레임워크는 Proxy 기반으로 동작한다.



  a person who has been given the authority to represent somebody else

프록시란 위의 정의처럼 누군가를 대신해 역할을 수행해주는 사람, 대리인이라는 의미이다.
스프링 AOP 는 AOP 적용을 원하는 기능을 수행하는 타겟 오브젝트 앞단에 Proxy Object를 하나 더 세워 그 proxy 가 부가 기능을 수행하고 
실제 오브젝트로의 호출까지 담당하게 된다.


<img width="521" alt="Screen Shot 2022-08-22 at 11 52 10 PM" src="https://user-images.githubusercontent.com/41246605/186295637-e5220f39-7d8f-43f6-bd3e-c537057e7840.png">


스프링은 아래 2가지 방식으로 타겟 오브젝트의 프록시를 만든다.

- JDK Dynamic Proxy : Java 에서 기본적으로 제공하는 표준 프록시 생성 모듈, 인터페이스 기반의 프록시 생성
- cglib : 오픈소스 라이브러리, 클래스 기반의 프록시 생성
    - cglib 의 코드를 랩핑해서 스프링 코드의 일부로 포함시킴


### Self-invocation
개발하는 애플리케이션에서 스프링 빈에 aop 를 걸고자 하면 스프링이 런타임에 해당 빈에 프록시를 생성해주고, 
해당 빈을 사용하고자 하는 다른 빈에선 그 프록시를 주입받아 프록시 객체로 호출을 요청한다.



### AOP
AOP 는 **Aspect Oriented Programming** 의 약자로 관점지향 프로그래밍이라고 한다. 
이는 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 그 관점을 기준으로 각각 모듈화 한다는 것이다.
위에서 언급한 프록시 객체를 통해 우리는 트랜잭션, 로깅, 캐싱 등의 기능


# Reference

---

- [https://brownbears.tistory.com/191](https://brownbears.tistory.com/191)
- [https://eminentstar.tistory.com/75](https://eminentstar.tistory.com/75)
